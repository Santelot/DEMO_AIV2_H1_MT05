<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Playbook</title>

    <!-- Fonts (opcional) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome (opcional, para √≠conos) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      integrity="sha512-Avb2QiuDEEvB4bZJYdft2mNjVShBftLdPG8FJ0V7irTLQ8Uo0qcPxh4Plq7G5tGm0rU+1SPhVotteLpBERwTkw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- CSS INTEGRADO -->
    <style>
      /* Define CSS Variables (Custom Properties) */
      :root {
          --primary-color: #00a3a3;
          --secondary-color: #e0f2f1;
          --background-color: #f9f9f9;
          --text-color: #333;
          --light-gray: #ddd;
          --accent-orange: #ff6b35;
          --accent-green: #4caf50;
          --accent-blue: #2196f3;
          
          /* Dark Mode Colors */
          --dark-primary-color: #007979;
          --dark-secondary-color: #005050;
          --dark-background-color: #121212;
          --dark-text-color: #eee;
          --dark-light-gray: #444;
      }

      * {
          box-sizing: border-box;
      }

      body {
          font-family: 'Roboto', sans-serif;
          line-height: 1.6;
          margin: 0;
          padding: 0;
          background-color: var(--background-color);
          color: var(--text-color);
          transition: background-color 0.3s ease, color 0.3s ease;
          font-size: 1rem;
      }

      /* ========== HEADER ========== */
      header {
          background-color: var(--primary-color);
          color: white;
          padding: 1rem;
          text-align: center;
          margin-bottom: 1rem;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 1rem;
      }

      header h1 {
          font-size: 1.75em;
          margin: 0;
          font-weight: 700;
          display: flex;
          align-items: center;
          justify-content: center;
          text-align: center;
          width: 100%;
      }

      header h1 .book-icon {
          margin-right: 0.5rem;
          font-size: 1.2em;
      }

      .header-widgets {
          display: flex;
          flex-direction: column;
          gap: 15px;
          width: 100%;
          align-items: center;
      }

      .timer-container {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
          color: white;
          font-size: 1.2rem;
          padding: 0.75rem 1rem;
          border-radius: 15px;
          background-color: rgba(0,0,0, 0.2);
          width: fit-content;
      }

      .timer-container button {
          background-color: var(--secondary-color);
          color: var(--text-color);
          border: none;
          padding: 0.5rem 0.75rem;
          border-radius: 5px;
          cursor: pointer;
          transition: background-color 0.2s ease;
          font-weight: 500;
      }

      .timer-container button:hover {
          background-color: #b2dfdb;
      }

      .theme-toggle {
          display: flex;
          align-items: center;
          justify-content: center;
      }

      .theme-toggle i {
          margin: 0 0.5rem;
          color: white;
      }

      .switch {
          position: relative;
          display: inline-block;
          width: 60px;
          height: 34px;
      }

      .switch input {
          opacity: 0;
          width: 0;
          height: 0;
      }

      .slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          transition: .4s;
      }

      .slider:before {
          position: absolute;
          content: "";
          height: 26px;
          width: 26px;
          left: 4px;
          bottom: 4px;
          background-color: white;
          transition: .4s;
      }

      input:checked + .slider {
          background-color: var(--primary-color);
      }

      input:focus + .slider {
          box-shadow: 0 0 1px var(--primary-color);
      }

      input:checked + .slider:before {
          transform: translateX(26px);
      }

      .slider.round {
          border-radius: 34px;
      }

      .slider.round:before {
          border-radius: 50%;
      }

      /* ========== MAIN LAYOUT ========== */
      .main-container {
          display: flex;
          flex-direction: column;
          min-height: calc(100vh - 6rem);
      }

      /* ========== ASIDE (Activity List) ========== */
      aside.activity-list {
          width: 100%;
          background-color: var(--secondary-color);
          padding: 1rem;
          border-bottom: 1px solid var(--light-gray);
          transition: background-color 0.3s ease, border-color 0.3s ease;
          overflow-y: auto;
          display: flex;
          flex-direction: column;
      }

      aside.activity-list h2 {
          font-size: 1.25em;
          margin-bottom: 1rem;
          color: var(--text-color);
          text-align: center;
      }

      aside.activity-list ul {
          list-style: none;
          padding: 0;
          margin: 0;
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 0.75rem;
      }

      aside.activity-list li {
          margin-bottom: 0;
      }

      aside.activity-list a {
          color: var(--text-color);
          text-decoration: none;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 1.5em;
          width: auto;
          padding: 0.5rem 1.2rem;
          background-color: rgba(0, 0, 0, 0.1);
          border-radius: 30px;
          font-weight: bold;
          font-family: 'Arial', sans-serif;
          transition: background-color 0.2s ease, transform 0.2s ease, color 0.2s ease;
      }

      aside.activity-list a[href="#activity-0"] {
          font-size: 1.3em;
          padding: 0.6rem 1rem;
      }

      aside.activity-list a:hover {
          background-color: rgba(0, 0, 0, 0.2);
          transform: translateY(-2px);
      }

      /* NEW: Style for the active link in the sidebar */
      aside.activity-list a.active,
      aside.activity-list a.active:hover {
          background-color: var(--primary-color);
          color: white;
          transform: translateY(0);
      }


      .sidebar-info {
          margin-top: 1.5rem;
          font-size: 0.8em;
          color: #666;
          padding: 0 0.5rem;
      }

      .sidebar-info p {
          margin-bottom: 0.5rem;
          text-align: center;
      }

      /* ========== MAIN CONTENT ========== */
      main.content {
          flex: 1;
          padding: 1rem;
          transition: background-color 0.3s ease, color 0.3s ease;
          overflow-y: auto;
      }

      .progress-bar {
          background-color: var(--light-gray);
          height: 0.7rem;
          margin-bottom: 1.5rem;
          border-radius: 5px;
          overflow: hidden;
      }

      .progress {
          background-color: var(--primary-color);
          height: 100%;
          width: 0%;
          transition: width 0.3s ease;
          border-radius: 5px;
      }

      /* ========== ACTIVITY CARDS ========== */
      .activity-card {
          background-color: white;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          margin-bottom: 1.5rem;
          padding: 1.5rem;
          transition: opacity 0.333s ease;
          opacity: 0;
          position: absolute;
          width: calc(100% - 2rem);
      }

      .activity-card.active {
          display: block;
          opacity: 1;
          position: relative;
      }

      .activity-card > h2 {
          display: flex;
          align-items: center;
          font-size: 1.6em;
          margin-bottom: 0.5rem;
          color: var(--primary-color);
      }

      .activity-card > h2 .book-icon {
          margin-right: 0.5rem;
          font-size: 1em;
      }

      .overview-subtitle {
          font-size: 1em;
          color: #777;
          margin-top: -0.2rem;
          margin-bottom: 1.5rem;
          text-align: center;
          font-style: italic;
      }

      /* ========== ACTIVITY HEADER (con timer) ========== */
      .activity-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
          gap: 1rem;
      }

      .activity-header h2 {
          margin: 0;
          flex: 1;
          min-width: 250px;
      }

      .activity-timer {
          display: flex;
          align-items: center;
          gap: 10px;
          background-color: var(--secondary-color);
          padding: 0.75rem 1rem;
          border-radius: 10px;
      }

      .activity-duration {
          font-size: 1.3rem;
          font-weight: 700;
          color: var(--primary-color);
      }

      .timer-start-btn {
          background-color: var(--accent-green);
          color: white;
          border: none;
          padding: 0.5rem 1rem;
          border-radius: 5px;
          cursor: pointer;
          font-weight: 600;
          transition: background-color 0.2s ease, transform 0.1s ease;
      }

      .timer-start-btn:hover {
          background-color: #45a049;
          transform: scale(1.05);
      }

      .timer-start-btn.running {
          background-color: var(--accent-orange);
      }

      .timer-start-btn.running:hover {
          background-color: #e55a2b;
      }

      /* ========== COMMAND SECTIONS (De un Vistazo) ========== */
      .command-section {
          margin-bottom: 2rem;
          padding: 1.5rem;
          background-color: #fafafa;
          border-radius: 8px;
          border-left: 4px solid var(--primary-color);
      }

      .command-section h3 {
          margin-top: 0;
          margin-bottom: 1rem;
          color: var(--primary-color);
          font-size: 1.3em;
          font-weight: 600;
      }

      .objective-box {
          background-color: white;
          padding: 1.25rem;
          border-radius: 6px;
          border: 2px solid var(--accent-blue);
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .objective-box p {
          margin: 0;
          font-size: 1.05em;
          line-height: 1.7;
      }

      .objective-box strong {
          color: var(--primary-color);
      }

      /* ========== XOLO PROMPT BOX ========== */
      .xolo-prompt {
          border-left-color: var(--accent-orange);
      }

      .prompt-box {
          background-color: white;
          border-radius: 8px;
          overflow: hidden;
      }

      .prompt-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 0.75rem 1rem;
          background-color: var(--primary-color);
          color: white;
      }

      .prompt-label {
          font-weight: 600;
          font-size: 0.95em;
      }

      .copy-btn {
          background-color: white;
          color: var(--primary-color);
          border: none;
          padding: 0.4rem 0.8rem;
          border-radius: 4px;
          cursor: pointer;
          font-weight: 600;
          transition: background-color 0.2s ease;
      }

      .copy-btn:hover {
          background-color: var(--secondary-color);
      }

      .prompt-box pre {
          padding: 1rem;
          margin: 0;
          background-color: #fafafa;
          border: 1px solid #e0e0e0;
          white-space: pre-wrap;
          word-wrap: break-word;
          font-size: 0.9em;
          line-height: 1.6;
      }

      /* ========== ESSENTIALS GRID ========== */
      .essentials-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
          margin-top: 1rem;
      }

      .essential-card {
          background-color: white;
          padding: 1.25rem;
          border-radius: 8px;
          border: 2px solid var(--secondary-color);
          text-align: center;
          transition: transform 0.2s ease, box-shadow 0.2s ease;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
      }

      .essential-card:hover {
          transform: translateY(-4px);
          box-shadow: 0 6px 16px rgba(0, 163, 163, 0.2);
          border-color: var(--primary-color);
      }

      .essential-icon {
          font-size: 2.5em;
          margin-bottom: 0.5rem;
          display: block;
      }

      .essential-card h4 {
          margin: 0.5rem 0;
          color: var(--primary-color);
          font-size: 1.1em;
          font-weight: 600;
      }

      .essential-card p {
          margin: 0.5rem 0 0 0;
          font-size: 0.9em;
          color: #555;
          line-height: 1.5;
      }

      .essential-card code {
          background-color: #f0f0f0;
          padding: 0.2rem 0.4rem;
          border-radius: 3px;
          font-size: 0.85em;
          color: #d32f2f;
          font-weight: 600;
      }

      @media (max-width: 768px) {
          .essentials-grid {
              grid-template-columns: 1fr;
          }
      }

      /* ========== MATERIALS CHECKLIST ========== */
      .materials-checklist {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
      }

      .materials-checklist label {
          display: flex;
          align-items: center;
          padding: 0.75rem;
          background-color: white;
          border-radius: 6px;
          cursor: pointer;
          transition: background-color 0.2s ease;
      }

      .materials-checklist label:hover {
          background-color: #f0f0f0;
      }

      .materials-checklist input[type="checkbox"] {
          margin-right: 0.75rem;
          width: 20px;
          height: 20px;
          cursor: pointer;
      }

      .materials-checklist input[type="checkbox"]:checked + * {
          text-decoration: line-through;
          color: #999;
      }

      /* ========== TIMELINE ========== */
      .timeline {
          position: relative;
          padding-left: 2rem;
      }

      .timeline::before {
          content: '';
          position: absolute;
          left: 0.5rem;
          top: 0;
          bottom: 0;
          width: 3px;
          background-color: var(--primary-color);
      }

      .timeline-item {
          position: relative;
          margin-bottom: 1.5rem;
      }

      .timeline-dot {
          position: absolute;
          left: -1.75rem;
          top: 0.25rem;
          width: 2rem;
          height: 2rem;
          background-color: var(--primary-color);
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: bold;
          font-size: 1.1em;
      }

      .timeline-content {
          background-color: white;
          padding: 1rem;
          border-radius: 6px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .timeline-content strong {
          display: block;
          color: var(--primary-color);
          font-size: 1.1em;
          margin-bottom: 0.3rem;
      }

      .timeline-content p {
          margin: 0.5rem 0 0 0;
          color: #666;
          font-size: 0.95em;
      }

      .time-badge {
          display: inline-block;
          background-color: var(--accent-orange);
          color: white;
          padding: 0.2rem 0.6rem;
          border-radius: 12px;
          font-size: 0.85em;
          font-weight: 600;
          margin-left: 0.5rem;
      }

      /* ========== PREP SECTION ========== */
      .prep-section {
          border-left-color: var(--accent-green);
      }

      .prep-list {
          background-color: white;
          padding: 1.5rem 1.5rem 1.5rem 2.5rem;
          border-radius: 6px;
          margin: 0;
      }

      .prep-list li {
          margin-bottom: 0.75rem;
          font-size: 1em;
          line-height: 1.6;
      }

      /* ========== ROLES SECTION ========== */
      .roles-section {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 1rem;
          margin-bottom: 1.5rem;
      }

      .role-card {
          padding: 1rem;
          border-radius: 8px;
          border: 2px solid;
      }

      .role-card h4 {
          margin-top: 0;
          margin-bottom: 0.75rem;
          font-size: 1.1em;
      }

      .role-card ul {
          margin: 0;
          padding-left: 1.2rem;
      }

      .role-card li {
          margin-bottom: 0.5rem;
          font-size: 0.95em;
          line-height: 1.5;
      }

      .role-teacher {
          background-color: #fff3e0;
          border-color: var(--accent-orange);
      }

      .role-teacher h4 {
          color: var(--accent-orange);
      }

      .role-xolo {
          background-color: #e3f2fd;
          border-color: var(--accent-blue);
      }

      .role-xolo h4 {
          color: var(--accent-blue);
      }

      .role-student {
          background-color: #f1f8e9;
          border-color: var(--accent-green);
      }

      .role-student h4 {
          color: var(--accent-green);
      }

      /* ========== SLIDE REFERENCE ========== */
      .slide-reference {
          background-color: #fafafa;
          padding: 1.25rem;
          border-radius: 8px;
          border: 2px dashed var(--primary-color);
          margin-bottom: 1.5rem;
      }

      .slide-reference h4 {
          margin-top: 0;
          margin-bottom: 1rem;
          color: var(--primary-color);
      }

      .slide-content {
          background-color: white;
          padding: 1rem;
          border-radius: 6px;
      }

      .slide-content p, .slide-content ol {
          margin: 0.75rem 0;
      }

      .slide-content ul {
          margin: 0.75rem 0;
          padding-left: 1.5rem;
      }

      .slide-content li {
          margin-bottom: 0.5rem;
      }

      .highlight-text {
          background-color: #fff9c4;
          padding: 0.5rem 0.75rem;
          border-radius: 6px;
          border-left: 4px solid #fbc02d;
          font-weight: 600;
      }

      .pseudocode {
          background-color: #f5f5f5;
          padding: 1rem;
          border-radius: 6px;
          font-family: 'Courier New', monospace;
          margin: 1rem 0;
      }

      .pseudocode p {
          margin: 0.5rem 0;
      }

      /* ========== OPTIONAL SCRIPT (Collapsible) ========== */
      .optional-script {
          margin-top: 1.5rem;
      }

      .collapsible-button {
          background-color: var(--light-gray);
          color: var(--text-color);
          border: none;
          padding: 0.75rem 1rem;
          width: 100%;
          text-align: left;
          cursor: pointer;
          border-radius: 6px;
          font-size: 0.95em;
          font-weight: 600;
          transition: background-color 0.2s ease;
      }

      .collapsible-button:hover {
          background-color: #d0d0d0;
      }

      .collapsible-content {
          display: none;
          padding: 1rem;
          margin-top: 0.5rem;
          background-color: #f9f9f9;
          border-radius: 6px;
          border: 1px solid var(--light-gray);
      }

      .collapsible-content.active {
          display: block;
      }

      .dialogue {
          padding: 1rem;
          border-radius: 6px;
          line-height: 1.7;
      }

      .dialogue.assistant {
          background-color: #e0f7fa;
          border-left: 4px solid var(--accent-blue);
      }

      /* ========== CHALLENGE PROMPT ========== */
      .challenge-prompt {
          margin-top: 1.5rem;
          padding: 1.25rem;
          background-color: #fff3e0;
          border-radius: 8px;
          border: 2px solid var(--accent-orange);
      }

      .challenge-prompt h4 {
          margin-top: 0;
          margin-bottom: 1rem;
          color: var(--accent-orange);
      }

      .challenge-text {
          background-color: white;
          padding: 1rem;
          border-radius: 6px;
          font-style: italic;
          font-weight: 500;
          border-left: 4px solid var(--accent-orange);
      }

      /* ========== THINK-PAIR-SHARE STRUCTURE ========== */
      .tps-structure {
          display: flex;
          flex-direction: column;
          gap: 1rem;
      }

      .tps-phase {
          background-color: #f5f5f5;
          padding: 1rem;
          border-radius: 8px;
          border-left: 4px solid var(--primary-color);
      }

      .tps-phase h4 {
          margin-top: 0;
          margin-bottom: 0.75rem;
          color: var(--primary-color);
      }

      .tps-phase p {
          margin: 0.5rem 0;
      }

      .tps-phase ul {
          margin: 0.75rem 0;
          padding-left: 1.5rem;
      }

      /* ========== DARK MODE ========== */
      body.dark-mode {
          background-color: var(--dark-background-color);
          color: var(--dark-text-color);
      }

      body.dark-mode header {
          background-color: var(--dark-primary-color);
      }

      body.dark-mode .activity-card {
          background-color: var(--dark-light-gray);
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      body.dark-mode .activity-card > h2 {
          color: #66d9ef;
      }

      body.dark-mode .progress-bar {
          background-color: var(--dark-light-gray);
      }

      body.dark-mode aside.activity-list {
          background-color: var(--dark-secondary-color);
          border-color: var(--dark-light-gray);
      }

      body.dark-mode aside.activity-list h2 {
          color: var(--dark-text-color);
      }

      body.dark-mode aside.activity-list a {
          color: var(--dark-text-color);
          background-color: var(--dark-primary-color);
      }

      body.dark-mode aside.activity-list a:hover {
          background-color: var(--primary-color);
      }

      /* Active link in dark mode */
      body.dark-mode aside.activity-list a.active,
      body.dark-mode aside.activity-list a.active:hover {
          background-color: #00c4c4; /* Brighter version of primary for better contrast */
          color: #121212;
      }

      body.dark-mode .sidebar-info {
          color: #ccc;
      }

      body.dark-mode .command-section,
      body.dark-mode .slide-reference,
      body.dark-mode .tps-phase {
          background-color: #2a2a2a;
      }
      body.dark-mode .role-teacher { background-color: #432a0c; }
      body.dark-mode .role-xolo { background-color: #1e3a5f; }
      body.dark-mode .role-student { background-color: #2e4b26; }

      body.dark-mode .objective-box,
      body.dark-mode .prompt-box pre,
      body.dark-mode .essential-card,
      body.dark-mode .timeline-content,
      body.dark-mode .slide-content,
      body.dark-mode .prep-list,
      body.dark-mode .challenge-text {
          background-color: #333;
          color: var(--dark-text-color);
      }

      body.dark-mode .collapsible-button {
          background-color: var(--dark-light-gray);
          color: var(--dark-text-color);
      }

      body.dark-mode .collapsible-content {
          background-color: #2a2a2a;
          border-color: var(--dark-light-gray);
      }

      body.dark-mode .dialogue.assistant {
          background-color: #263238;
          color: var(--dark-text-color);
      }

      body.dark-mode .materials-checklist label {
          background-color: #333;
      }

      body.dark-mode .materials-checklist label:hover {
          background-color: #444;
      }

      /* ========== MEDIA QUERIES ========== */
      @media (min-width: 768px) {
          header {
              flex-direction: row;
              justify-content: space-between;
              align-items: center;
          }

          header h1 {
              justify-content: flex-start;
              width: auto;
          }

          .header-widgets {
              flex-direction: row;
              width: auto;
              justify-content: flex-end;
          }

          .main-container {
              flex-direction: row;
          }

          aside.activity-list {
              width: 220px;
              border-right: 1px solid var(--light-gray);
              border-bottom: none;
              padding: 1rem;
          }

          aside.activity-list h2 {
              text-align: left;
          }

          aside.activity-list ul {
              flex-direction: column;
              align-items: flex-start;
              gap: 0;
          }

          aside.activity-list li {
              margin-bottom: 0.75rem;
          }

          .sidebar-info p {
              text-align: left;
          }

          .activity-header {
              flex-wrap: nowrap;
          }
      }

      @media (max-width: 767px) {
          .activity-header {
              flex-direction: column;
              align-items: flex-start;
          }

          .activity-timer {
              width: 100%;
              justify-content: space-between;
          }
      }
    </style>
  </head>

  <body>
    <!-- ========== HEADER ========== -->
    <header>
      <h1>
        <span class="book-icon">üìò</span>
        Playbook
      </h1>

      <div class="header-widgets">
        <div class="timer-container">
          <span id="global-timer">‚è±Ô∏è 40:00</span>
          <button id="global-start-stop" type="button">Start</button>
          <button id="global-reset" type="button">Reset</button>
        </div>

        <div class="theme-toggle">
          <i class="fas fa-sun"></i>
          <label class="switch" aria-label="Toggle dark mode">
            <input id="theme-toggle-input" type="checkbox" />
            <span class="slider round"></span>
          </label>
          <i class="fas fa-moon"></i>
        </div>
      </div>
    </header>

    <!-- ========== MAIN LAYOUT ========== -->
    <div class="main-container">
      <!-- ========== ASIDE (Activity List) ========== -->
      <aside class="activity-list">
        <h2>Actividades</h2>

        <!-- IMPORTANTE:
             - Todos los links deben ser #activity-X
             - NO deben ir a otras p√°ginas
        -->
        <ul>
          <li><a href="#activity-0">0</a></li>
          <li><a href="#activity-1">1</a></li>
          <li><a href="#activity-2">2</a></li>
          <li><a href="#activity-3">3</a></li>
          <li><a href="#activity-4">4</a></li>
          <li><a href="#activity-5">5</a></li>
        </ul>

        <div class="sidebar-info">
          <p><strong>Tip:</strong> Usa los n√∫meros para cambiar de actividad.</p>
          <p>El progreso se actualiza autom√°ticamente.</p>
        </div>
      </aside>

      <!-- ========== MAIN CONTENT ========== -->
      <main class="content">
        <div class="progress-bar">
          <div class="progress"></div>
        </div>

        <!-- =========================================================
             ACTIVITY 0 (Overview)
        ========================================================== -->
        <section class="activity-card" id="activity-0">
          <h2>
            <span class="book-icon">üß≠</span>
            De un vistazo
          </h2>

          <p class="overview-subtitle">
            Resumen r√°pido para que puedas dirigir la sesi√≥n sin fricci√≥n.
          </p>

          <div class="command-section">
            <h3>Objetivos</h3>
            <div class="objective-box">
              <p>
                <strong>1.</strong> (Coloca aqu√≠ el objetivo 1)
              </p>
              <p>
                <strong>2.</strong> (Coloca aqu√≠ el objetivo 2)
              </p>
            </div>
          </div>

          <div class="command-section prep-section">
            <h3>Preparaci√≥n</h3>
            <ol class="prep-list">
              <li>(Material / setup 1)</li>
              <li>(Material / setup 2)</li>
              <li>(Material / setup 3)</li>
            </ol>
          </div>

          <div class="command-section">
            <h3>Roles</h3>
            <div class="roles-section">
              <div class="role-card role-teacher">
                <h4>Docente</h4>
                <ul>
                  <li>(Responsabilidad clave)</li>
                  <li>(Responsabilidad clave)</li>
                </ul>
              </div>

              <div class="role-card role-xolo">
                <h4>Asistente</h4>
                <ul>
                  <li>(Qu√© hace el asistente)</li>
                  <li>(Qu√© hace el asistente)</li>
                </ul>
              </div>

              <div class="role-card role-student">
                <h4>Alumnos</h4>
                <ul>
                  <li>(Qu√© hacen los alumnos)</li>
                  <li>(Qu√© hacen los alumnos)</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- =========================================================
             ACTIVITY 1
        ========================================================== -->
        <section class="activity-card" id="activity-1">
          <div class="activity-header">
            <h2>
              <span class="book-icon">1Ô∏è‚É£</span>
              Actividad 1 - T√≠tulo
            </h2>

            <div class="activity-timer">
              <!-- OJO: el <span> debe ir justo antes del bot√≥n por tu JS -->
              <span class="activity-duration">‚è±Ô∏è 05:00</span>
              <button class="timer-start-btn" type="button" data-duration="300">
                Iniciar
              </button>
            </div>
          </div>

          <div class="slide-reference">
            <h4>Proyectar</h4>
            <div class="slide-content">
              <p>(Instrucci√≥n de diapositiva / visual)</p>
            </div>
          </div>

          <div class="command-section">
            <h3>Gui√≥n</h3>
            <div class="dialogue assistant">
              (Texto breve, estilo Playbook. Aqu√≠ va el di√°logo.)
            </div>
          </div>
        </section>

        <!-- =========================================================
             ACTIVITY 2 (con prompt box + copy)
        ========================================================== -->
        <section class="activity-card" id="activity-2">
          <div class="activity-header">
            <h2>
              <span class="book-icon">2Ô∏è‚É£</span>
              Actividad 2 - T√≠tulo
            </h2>

            <div class="activity-timer">
              <span class="activity-duration">‚è±Ô∏è 10:00</span>
              <button class="timer-start-btn" type="button" data-duration="600">
                Iniciar
              </button>
            </div>
          </div>

          <div class="command-section xolo-prompt">
            <h3>Prompt del Asistente</h3>

            <div class="prompt-box">
              <div class="prompt-header">
                <span class="prompt-label">Copia y pega</span>
                <button
                  class="copy-btn"
                  type="button"
                  onclick="copyPrompt('prompt-activity-2')"
                >
                  <i class="fas fa-copy"></i> Copiar
                </button>
              </div>

              <pre id="prompt-activity-2"><code>(Pega aqu√≠ el prompt)</code></pre>
            </div>
          </div>

          <div class="optional-script">
            <button class="collapsible-button" type="button">
              Script opcional (abre/cierra)
            </button>
            <div class="collapsible-content">
              <div class="dialogue assistant">
                (Texto opcional que no siempre dir√°s.)
              </div>
            </div>
          </div>
        </section>

        <!-- =========================================================
             ACTIVITY 3
        ========================================================== -->
        <section class="activity-card" id="activity-3">
          <div class="activity-header">
            <h2>
              <span class="book-icon">3Ô∏è‚É£</span>
              Actividad 3 - T√≠tulo
            </h2>

            <div class="activity-timer">
              <span class="activity-duration">‚è±Ô∏è 08:00</span>
              <button class="timer-start-btn" type="button" data-duration="480">
                Iniciar
              </button>
            </div>
          </div>

          <div class="command-section">
            <h3>Instrucciones</h3>
            <div class="timeline">
              <div class="timeline-item">
                <div class="timeline-dot">1</div>
                <div class="timeline-content">
                  <strong>Paso 1 <span class="time-badge">2 min</span></strong>
                  <p>(Instrucci√≥n clara)</p>
                </div>
              </div>

              <div class="timeline-item">
                <div class="timeline-dot">2</div>
                <div class="timeline-content">
                  <strong>Paso 2 <span class="time-badge">6 min</span></strong>
                  <p>(Instrucci√≥n clara)</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- =========================================================
             ACTIVITY 4
        ========================================================== -->
        <section class="activity-card" id="activity-4">
          <div class="activity-header">
            <h2>
              <span class="book-icon">4Ô∏è‚É£</span>
              Actividad 4 - T√≠tulo
            </h2>

            <div class="activity-timer">
              <span class="activity-duration">‚è±Ô∏è 07:00</span>
              <button class="timer-start-btn" type="button" data-duration="420">
                Iniciar
              </button>
            </div>
          </div>

          <div class="command-section">
            <h3>Checklist</h3>
            <div class="materials-checklist">
              <label>
                <input type="checkbox" />
                <span>(Elemento 1)</span>
              </label>

              <label>
                <input type="checkbox" />
                <span>(Elemento 2)</span>
              </label>

              <label>
                <input type="checkbox" />
                <span>(Elemento 3)</span>
              </label>
            </div>
          </div>
        </section>

        <!-- =========================================================
             ACTIVITY 5 (Challenge prompt)
        ========================================================== -->
        <section class="activity-card" id="activity-5">
          <div class="activity-header">
            <h2>
              <span class="book-icon">5Ô∏è‚É£</span>
              Actividad 5 - T√≠tulo
            </h2>

            <div class="activity-timer">
              <span class="activity-duration">‚è±Ô∏è 10:00</span>
              <button class="timer-start-btn" type="button" data-duration="600">
                Iniciar
              </button>
            </div>
          </div>

          <div class="challenge-prompt">
            <h4>Reto</h4>
            <div class="challenge-text">
              (Texto del reto aqu√≠, breve y accionable.)
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- JS INTEGRADO -->
    <script>
      // ========== THEME TOGGLE ==========
      const themeToggleInput = document.getElementById("theme-toggle-input");
      const body = document.body;

      function setTheme() {
        if (localStorage.getItem("dark-mode") === "true") {
          body.classList.add("dark-mode");
          themeToggleInput.checked = true;
        } else {
          body.classList.remove("dark-mode");
          themeToggleInput.checked = false;
        }
      }

      setTheme();

      themeToggleInput.addEventListener("change", () => {
        body.classList.toggle("dark-mode");
        if (body.classList.contains("dark-mode")) {
          localStorage.setItem("dark-mode", "true");
        } else {
          localStorage.setItem("dark-mode", "false");
        }
      });

      // ========== COLLAPSIBLE SECTIONS ==========
      const collapsibleButtons = document.querySelectorAll(".collapsible-button");

      collapsibleButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const content = button.nextElementSibling;
          content.classList.toggle("active");
        });
      });

      // ========== GLOBAL TIMER (Countdown) ==========
      const globalTimer = document.getElementById("global-timer");
      const globalStartStopButton = document.getElementById("global-start-stop");
      const globalResetButton = document.getElementById("global-reset");

      let globalInterval;
      let globalTimeLeft = 40 * 60; // 40 minutos en segundos
      let globalTimerRunning = false;

      function updateGlobalTimerDisplay() {
        const minutes = Math.floor(globalTimeLeft / 60);
        const seconds = globalTimeLeft % 60;
        globalTimer.textContent = `‚è±Ô∏è ${String(minutes).padStart(2, "0")}:${String(seconds).padStart(2, "0")}`;
        
        // Cambiar color seg√∫n tiempo restante
        if (globalTimeLeft <= 60) {
          globalTimer.style.color = "#ff6b35"; // Naranja cuando queda 1 min
        } else if (globalTimeLeft <= 300) {
          globalTimer.style.color = "#fbc02d"; // Amarillo cuando quedan 5 min
        } else {
          globalTimer.style.color = "white";
        }
      }

      function startStopGlobalTimer() {
        if (globalTimerRunning) {
          clearInterval(globalInterval);
          globalStartStopButton.textContent = "Start";
        } else {
          globalInterval = setInterval(() => {
            if (globalTimeLeft > 0) {
              globalTimeLeft--;
              updateGlobalTimerDisplay();
              
              // Alerta al llegar a 0
              if (globalTimeLeft === 0) {
                clearInterval(globalInterval);
                globalTimerRunning = false;
                globalStartStopButton.textContent = "Start";
                alert("‚è∞ ¬°Tiempo de misi√≥n terminado! (40 minutos)");
              }
            }
          }, 1000);
          globalStartStopButton.textContent = "Stop";
        }
        globalTimerRunning = !globalTimerRunning;
      }

      function resetGlobalTimer() {
        clearInterval(globalInterval);
        globalTimerRunning = false;
        globalTimeLeft = 40 * 60;
        updateGlobalTimerDisplay();
        globalStartStopButton.textContent = "Start";
      }

      globalStartStopButton.addEventListener("click", startStopGlobalTimer);
      globalResetButton.addEventListener("click", resetGlobalTimer);

      // ========== ACTIVITY TIMERS (Individual Countdown) ==========
      let activityIntervals = {};

      function updateActivityTimerDisplay(button, timeLeft) {
        const durationSpan = button.previousElementSibling;
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        durationSpan.textContent = `‚è±Ô∏è ${String(minutes).padStart(2, "0")}:${String(seconds).padStart(2, "0")}`;
        
        // Cambiar color seg√∫n tiempo restante
        if (timeLeft <= 30) {
          durationSpan.style.color = "#ff6b35"; // Naranja cuando quedan 30 seg
        } else if (timeLeft <= 60) {
          durationSpan.style.color = "#fbc02d"; // Amarillo cuando queda 1 min
        } else {
          durationSpan.style.color = "#00a3a3"; // Color normal
        }
      }

      function startActivityTimer(button) {
        const duration = parseInt(button.dataset.duration);
        const activityId = button.closest('.activity-card').id;
        
        // Si ya hay un timer corriendo para esta actividad, lo detenemos
        if (activityIntervals[activityId]) {
          clearInterval(activityIntervals[activityId].interval);
          delete activityIntervals[activityId];
          button.textContent = "Iniciar";
          button.classList.remove("running");
          
          // Restaurar tiempo original
          const originalMinutes = Math.floor(duration / 60);
          const originalSeconds = duration % 60;
          button.previousElementSibling.textContent = `‚è±Ô∏è ${String(originalMinutes).padStart(2, "0")}:${String(originalSeconds).padStart(2, "0")}`;
          button.previousElementSibling.style.color = "#00a3a3";
          return;
        }
        
        // Iniciar nuevo timer
        let timeLeft = duration;
        button.classList.add("running");
        button.textContent = "Detener";
        
        const interval = setInterval(() => {
          if (timeLeft > 0) {
            timeLeft--;
            updateActivityTimerDisplay(button, timeLeft);
            
            // Alerta al llegar a 0
            if (timeLeft === 0) {
              clearInterval(interval);
              delete activityIntervals[activityId];
              button.textContent = "Iniciar";
              button.classList.remove("running");
              
              // Alerta visual
              const activityTitle = button.closest('.activity-card').querySelector('h2').textContent;
              alert(`‚è∞ ¬°Tiempo de actividad terminado!\n\n${activityTitle}`);
              
              // Restaurar display original
              const originalMinutes = Math.floor(duration / 60);
              const originalSeconds = duration % 60;
              button.previousElementSibling.textContent = `‚è±Ô∏è ${String(originalMinutes).padStart(2, "0")}:${String(originalSeconds).padStart(2, "0")}`;
              button.previousElementSibling.style.color = "#00a3a3";
            }
          }
        }, 1000);
        
        activityIntervals[activityId] = { interval, duration };
      }

      // Attach event listeners to activity timer buttons
      document.addEventListener('DOMContentLoaded', () => {
        const timerButtons = document.querySelectorAll('.timer-start-btn');
        timerButtons.forEach(button => {
          button.addEventListener('click', () => startActivityTimer(button));
        });
      });

      // ========== COPY PROMPT FUNCTIONALITY ==========
      function copyPrompt(promptId) {
        const promptElement = document.getElementById(promptId);
        const text = promptElement.textContent;
        
        navigator.clipboard.writeText(text).then(() => {
          // Feedback visual
          const copyBtn = event.target.closest('.copy-btn');
          const originalText = copyBtn.innerHTML;
          copyBtn.innerHTML = '<i class="fas fa-check"></i> Copiado';
          copyBtn.style.backgroundColor = '#4caf50';
          
          setTimeout(() => {
            copyBtn.innerHTML = originalText;
            copyBtn.style.backgroundColor = '';
          }, 2000);
        }).catch(err => {
          alert('Error al copiar el texto. Por favor, c√≥pialo manualmente.');
        });
      }

      // ========== ACTIVITY NAVIGATION ==========
      const activityLinks = document.querySelectorAll(".activity-list a");
      const activityCards = document.querySelectorAll(".activity-card");
      const progressBar = document.querySelector(".progress");
      const numberOfActivities = activityCards.length;

      // Hide all activity cards initially
      activityCards.forEach((card) => {
        card.classList.remove("active");
        card.style.display = "none";
      });

      // Function to show the selected activity card
      function showActivity(activityId) {
        // Fade out the current active card
        const currentActive = document.querySelector(".activity-card.active");
        if (currentActive) {
          currentActive.classList.remove("active");
          setTimeout(() => {
            currentActive.style.display = "none";
          }, 333);
        }

        // Show the selected activity card and fade it in
        const selectedActivity = document.getElementById(activityId);
        if (selectedActivity) {
          selectedActivity.style.display = "block";
          setTimeout(() => {
            selectedActivity.classList.add("active");
          }, 50);

          // Update active state on sidebar links
          activityLinks.forEach(link => link.classList.remove('active'));
          const correspondingLink = document.querySelector(`.activity-list a[href="#${activityId}"]`);
          if (correspondingLink) {
              correspondingLink.classList.add('active');
          }
          
          updateProgressBar(activityId);
        }
      }

      // Function to update the progress bar
      function updateProgressBar(activityId) {
        const activityIndex = parseInt(activityId.split("-")[1]);

        let progressPercentage;

        if (numberOfActivities <= 1) {
          progressPercentage = (activityIndex === 0 && numberOfActivities === 1) ? 100 : 0;
        } else {
          progressPercentage = (activityIndex / (numberOfActivities - 1)) * 100;
        }
        
        progressPercentage = Math.min(100, Math.max(0, progressPercentage));
        progressBar.style.width = `${progressPercentage}%`;
      }

      // Add event listeners to activity links
      activityLinks.forEach((link) => {
        link.addEventListener("click", (event) => {
          event.preventDefault();
          const activityId = link.getAttribute("href").substring(1);
          showActivity(activityId);
        });
      });

      // Show the first activity by default on initial load
      if (activityCards.length > 0) {
        showActivity(activityCards[0].id);
      }
    </script>
  </body>
</html>
